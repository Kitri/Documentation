#+TITLE: Azure Fundamentals AZ-900
#+OPTIONS: toc:nil num:0 H:4 ^:nil pri:t html-style:nil
#+HTML_HEAD:  <link id="pagestyle" rel="stylesheet" type="text/css" href="../org.css"/>
#+HTML_LINK_HOME: ../index.html
#+TOC: headlines 3

* Understanding Cloud Concepts (15 - 20%) 

** Benefits of cloud computing

 - High Availability
 - Scalability
 - Elasticity
 - Agility
 - Geo-distribution
 - Disaster recovery
   
** Consumption-based model

Cloud comoputing is consumption based
 - No upfront costs
 - Pay when needed, stop when done

** CapEx vs OpEx

Capital Expenditure is spending money upfront on physical infrastructure and deducting those expenses with tiem

Operational Expenditure is spending money on products and services now, can deduct the expense the same year you spend it

** Cloud service Categories

 - IaaS :: Cloud provider keeps hardware up to date. E.g. virtual machines
 - PaaS :: Shared responsibility, Cloud hosts platform, you control inner platform, E.g. ADF, Azure App Services to host apps
 - SaaS :: Cloud responsible for everything e.g. office 365

#+CAPTION: Comparison
#+ATTR_HTML: :width 800 
[[file:./iaas-paas-saas.png]]

** Types of cloud

 - Public Cloud :: Services offered on public internet and available to anyone.
 - Private Cloud :: Computing resources used exclusively by users from one business or organization. Can be on-prem or hosted by third-party
 - Hybrid cloud :: Combination of the two - shares application between public and private cloud


* Understand core Azure services (30 - 35%)

** Azure Regions

54 regions curently (2 in SA - north and west)

*** Availability Zones

Within each region there are multiple (3) data centres that have geographical distance between them. 

If a region has a diamond on it on the map, it has an availability zone, so you can deploy to all 3 data centres, which means if one goes down you still have data in the other 2.

** Resource Groups

Way of organising resource groups

#+CAPTION: resource groups
#+ATTR_HTML: :width 800 
[[file:./resource_group.png]]

** Azure Resource Manager (ARM)

Model of deployments

Used to use Azure Service Manager (ASM)

Basically like a router between the user and Azure. How you interface with Azure

Enables you to interface with Azure in a consistent way, regardless of what you're trying to access.

*** Benefits
 - Deploy things as a group
 - Repeatedly deploy these things with templates
 - Access Control (role-based)
 - Tagging

#+ATTR_HTML: :width 800
[[file:./ARM.png]]

** Core architectural components

Broken up into 4 categories

*** Compute

"Executing code" in the cloud. A website, batch process, anything that computes on the cloud.

There are many different ways to compute on the cloud

 - Virtual machines :: Running windows or linux machine, full control - as if it was your machine (You have a "slice" of a physical machine). Over 200 options between CPU, RAM etc
 - Virtual machine Scale Set :: Multiple VMs running behind a load balancer. Infinitely scale horizontally; limited vertical scale due to hardware limit
 - Azure App Services :: PaaS - Give your code and config to Azure, and they will run it. Promise of performance but no access to hardware
 - Functions :: No longer in exam :) Small bits of code that run natively in code (write on editor in azure)
 - Azure Container Instance (ACI) :: Single instance, quickest way to deploy a container
 - Azure Kubernetes Service (AKS) :: Runs on a cluster of servers, enterprise-grade 

   
*** Networking

**** Connectivity Service

When you create a virtual machine you have to create a virtual network
 - Virtual Network :: Emulating a physical network. MS Global Network already exists, so a VN is just software config
 - Virtual Private Network (VPN) :: Connecting two networks as if they were on the same network
 - ExpressRoute :: high-speed private connection to Azure (physical fibre connection to an actual Azure box)

**** Protection Service
     
Firewall, privacy measures

 - DDos Protection :: Basic level included to protect their own network. You can pay for enhancement for your services
 - Azure Firewall :: You can configure traffic connecting to your services. Can handle brute-force attacks and stuff
 - Network Security Groups :: access control list (ACL(, static list of rules that allow traffic through
 - Private Link :: Take public services and turn them into private services. 

All of the services are protected by an access key

**** Delivery Service
     
Distributes or reloads traffic

 - Load Balancer :: distribute traffic evenly between multiple backend servers
 - Application Gateway :: a higher level of load balancer with an optional firewall
 - Content Delivery Network (CDN) :: Stores common static files on the edge, closer to the users for (perceived) imporoved performance
 - Azure Front Door Service :: Load balancer, CDN and firewall all-in-one

**** Monitoring Service

Watch traffic that travels across your network
 - Network Watcher
 - ExpressRoute Monitor
 - Azure Monitor

   
*** Storage

**** Unmanages Storage

The Azure storage account.

- General Purpose v2 (gpv2) :: most common: Blobs, tables, queries, files
- Azure Data Lake Storage Gen2 :: Cheapest type of storage. Designed for big data

Cheapest storage option - pay per GB

Benefits:
 - Access tiers: Hot, cool, archive
 - Performance tiers: Standard or premium
 - Location
 - Redundancy / Replication
 - Failover options

**** Managed storage

Azure Virtual Machine Disks - for VMs

Reserve capacity in advance

**** Backup, Replication and Recovery Storage

 - Recovery Services Vault
   - Backup storage
   - Can have retention policy
   - Also for replication
 - Azure Site Recovery 


*** Databases

 - Cosmos DB
   - Extremely fast storage
   - Designed for modern applications - requiring thousands of global replication
   - NoSQL
   - Multi-modal (contains multiple kinds of data - either mongodb, gremelin db, 5 or 6 different kinds that you have to choose in advance.
   - Supports many open-source API's and protocalls
     
 - Azure SQL Database
   - Running SQL Server engine underneath (not exact match, but close)
   - Database as a service
   - Benefits:
     - Easy to replicate
     - Easy to scale
     - Easy to migrate from SQL Server on-prem to cloud
 
 - Azure Database for Mysql
   - Managed version of mysql

 - Azure Database for PostgreSQL
   - Has better support for clusters and more complex server setups
   - Managed version

 - Azure Database Migration Service :: Tools and services for your migration journey

 - (not in exam) Azure Synapse Analytics (SQL DW) :: SQL Data warehouse - analytical not transactional
   

** Core Azure Solutions

*** Internet of Things

 - IoT Hub
 - IoT Central

*** Big Data and Analytics

 - Azure Synapse Analytics (formely SQL Data Warehouses)
 - HDInsights
 - Data Lake Analytics (not relevant anymore - rather use databricks)
 - Azure Databricks

*** AI

 - Azure Machine Learning Service
 - Studio

*** Serverless

 - Azure Functions
 - Logic Apps
 - Event Grid (used to be App Grid)
** Management Tools

Ways to connect to and manage Azure
 - Azure CLI :: Bash - useful for scripting automation 
 - Powershell :: SDK for powershell
 - Azure Portal :: Web interface
 - Azure Cloud Shell :: CLI in the browser (can choose between bash and powershell)
 - Azure Advisor :: Advises you how you can optimise your performance regarding use of azure (e.g. where you can save money) - AI that analyses your usage
   

 
* [Understand security, privacy, compliance, and trust (25 - 30%)
  
** Azure Firewall

Block invalid attacks, block ports, can apply whitelists etc

WAF = Web Application Firewall

** Azure DDoS Protection

Distributed Denial of Service attack

 - Always on monitoring
 - Automatic mitigation of L3/L4 attacks
 - L7 protection with Application Gateway Web application firewall
 - Globally deployed
 - Protection policies tuned to your VNet
 - Logging, alerting, and telemetry
 - Resource cost scale protection

** Network Security Group (NSG)

When you create a virtual network, you can apply NSG (set of rules on inbound or outbound traffic)

In front of subnet - e.g. can allow traffic to frontend and deny to backend

[[file:./nsg.png]]

 - Inbound NSG rules protect a destination IP address and port

Application security group concept if you want to create a group of rules e.g. "All VMs"


[[file:./asg.png]]

** User Defined Routes (UDR)

Specify exact path that network needs to travel

 - Force traffic over a route ::  e.g. force traffic to go through firewall before it can get to devices

** Choose an appropriate Azure security solution

Exam will ask this. Here is some advice on best practices

 - All virtual network subnets should use NSG
   - It's a strong lock on windows and doors that you don't use
   - Lock doors that's not being used
 - DDos - as needed or after attacked (this will cost extra money)
 - Applicatio Gateway with WAF. If you have enterprise level apps - get a good firewall
 - Security through layers
   - Not good enough to just have one level of security
     
[[file:./securitylayer.png]]

** MS Identity solution
   
Know the difference between authentication and authorization

 - Authentication is a user proving who they are - password etc
 - Authorization is ensuring that a user is permitted to perform an action
   
Move away from all authenticated users having admin access

*** Azure Active Directory (Identity as a service - IDaaS)

Microsoft's preferred solutions for identity management

Complete solution for managing users, groups, roles

 - Single-sign on :: Use same login details to sign in everywhere
 - Synchronize with your corporate AD :: Azure AD is not the same as corporate AD, but it can be synchronized
 - Does not support LDAP :: Azure AD is web-based identity management, so does not have the same features as corporate AD
 - Azure Multi-Factory Authentication :: User ID is first factor, Password is second factor, Mobile phone is third factor
  
Recommended authentication method: Role-based access control (RBAC)

** Azure Security
   
"Azure security" is the exams requirement. 

Shared security model: 
 - Physical :: Don't give out location of actual server, autolock physical machines etc 
 - Digital :: Use built-in services for digital security instead of building your own e.g. Azure AD, MFA, RBAC
 - Shared? :: If you have a VM you are responsible for windows updates and digital security of the VM, where as SaaS Azure is fully responsible
   
*** Azure Security Center

Unified security management and advanced threat protection

Free tier and paid tier available

Analyses and monitors the security on your azure services and makes recommendations of where you can improve security

*** Azure Key Vault
    
Central, secure repository for your secrets, certificates and keys

 - SSL certs, api keys, public/private key etc
 - Create signed keys and store them online
 - Generate or import SSL certificates
 - Authorised access only (can also have levels of access - admin can manage keys and logs vs developer who only gets dev keys)
   
*** Azure Information Protection (AIP)

DRM process for emails and documents. Can apply labels to these with permissions e.g. Confidential, secret etc

Can e.g. have office 365 block printing of documents 

*** Advanced Thread Protection (ATP)

 - Monitor and profile user behaviour and activities
 - Protect user identities and reduce the attack surface (can also block brute force attacks by doing this)
 - Identify suspicious activities and advanced attacks
 - Investigate alers and user activities

E.g. the user never logs in from home or over weekends. So when user logs in on a weekend the ATP can request a MFA, or don't allow user to login because it's unusual activity

*** Azure Policy

Governance

- Create rules across all of your Azure resources
- Evaluate compliance to those rules
- Can create custom policies using JSON

Examples of built-in policies
 - Require SQL Server 12.0
 - Allowed Storage Account SKUs
 - Allowed Locations
 - Allowed Virtual Machine SKUs (e.g. don't allow devs to get the most expensive VMs)
 - Apply tag and its default value (can use this for billing, e.g. not allowed to create resource if it doesn't have a billing code)
 - Not allowed resource types
 

**** Policy initiative

A set of policies, grouped together

e.g. a group can have:
"Every resourec and resource group must have these five tags"

*** Role-based Access Control (RBAC)

Microsoft recommended solution for authorization

Create roles that represent the common tasks of the job e.g.
 - Accountant 
 - Developer
 - Business Lead

Assign granular permissions to those roles, assign users to that role

People can have more than one role

Do not assign granular permissions to an individual. Can give people too much permissions, and what if they leave?

Built-in roles:
 - Reader (read-only) 
 - Contributor (RW)
 - Owner (Contributer but can give permissions to people too)

*** Locks

Two locks:
 - Read Only
 - Can Not Delete
   
Can go to resource - Locks - Add Lock

Need to delete lock before being able to delete resources

Using RBAC, you can restrict who has access to locks

*** Azure Advisor security assistance

Security of security advisor shows some warnings and recommendations (some of these will also show in security center)

*** Azure Blueprints
    
Create a subscription template with Roles and Policies already defined, and can then use this template to create others

*** Azure Monitor

[[file:./monitor.png]]

**** Azure Service Health

Global service issues within Azure. Shows things like connectivity issues in certain regions

** Compliance

Terms like
 - GDPR
 - ISO
 - NIST

Many different standards for technology across the world
MS publishes the standards they're compliant with and claim to be compliant with most and gives you tools to help you be in compliance with others

*** General Data Protection Regulation (GDPR)
 - New set of rules designed to give EU citizens more control over their personal data
 - Affects companies outside of the EU that handles EU citizen's data 
 - Data has to be collected legally under strict conditions
 - Data has to be protected from misuse
 - Certain reporting standards if any of these are breached

*** ISO

e.g. ISO 9001:2015 - quality management systems (QMS)

Azure is compliant with:
 - CSA STAR Certification
 - ISO 27001:2013
 - ISO 27017:2015
 - ISO 27018:2014
 - ISO 20000-1:2011
 - ISO 22301:2012
 - ISO 9001:2015

*** NIST Cybersecurity Framework (CSF)

National Institute of Standards and Technology

Audited for compliance

*** Microsoft Privacy statement

privacy.microsoft.com
*** Trust Centre

Portal that talks about MS's compliance and standards

High level

*** Service trust portal

Pen test reports, white papers, blueprints

**** Compliance manager
    
workflow-based risk assessment tool to help you manage regulatory compliance

Shows you your compliance score and what you need to do to reach compliance for E.g. GDPR

*** Azure Government Services

Separate account. e.g. porta.azure vs portal.azure.us

Department of Defence (DoD) has its own too

Isolated data centers separate from Azure public cloud

Meets standards specific to US govenment: FedRAMP, NIST, DIB, ITAR, .... 

*** Azure Germany Services

EU's equivalend of Azure government 

Germany has the strictest EU data protection

German Data trustee - unique requirement in germany

*** Azure China

 - Separate account
 - Data remains in china
   
You can deploy stuff here, but you need to follow their standards and rules

